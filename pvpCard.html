<!DOCTYPE html>
<html>
<head> 
<style>
	input {
		width: 55%;
		margin: 7px;
		border-radius: 5px;
		border:1px solid grey;
	}
	body {
		width: 40%;
		margin: auto;
	}
	button {
		font-family: "Courier New";
		background-color: #24a0ed;
		border-radius: 5px;
		border: none;
		padding: 7px;
	}
	svg{
		margin: 5% 20%;
	}
	select{
		border-radius: 5px;
		
	}
</style>
</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" width ="250" height="350" id="PokeCard">
	<rect width="250" height = "350" id="PokemonColor" style="fill:rgb(255,255,255);stroke-width: 50;stroke:#D7CD90;"/>
	<rect x="-20" y="0" rx="20" ry="20" width="150" height="25" fill="black" />
	<text fill="white" style = "fontSize='18'" font-family="Verdana" x="5" y="21" id = "PokemonName">Carbink</text>
	<image id="photoOutput" href="carbinkPoGo.png" height="130px" width="130px" x = "60" y = "25"/>
	<text fill = "black" font-size = "12" font-family="Verdana" x = "125" y = "170" text-anchor = "middle" id= 'fastMove'>Rock Throw</text>
	
	<rect x="35" y="185" rx="5" ry="5" width="180" height="25" opacity = "0.7" fill="#D7CD90" id = "chargeMove1Rect" style = "display: block;"/>
	<text fill = "black" font-size = "12" font-family="Verdana" x = "40" y = "200" id = "chargeMove1" style = "display: block;">Rock Slide &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp9-9-9-9</text>
	
	<rect x="35" y="220" rx="5" ry="5" width="180" height="25" opacity = "0.7" fill="#F6A7E8" id = "chargeMove2Rect" style = "display: block;"/>
	<text fill = "black" font-size = "12" font-family="Verdana" x = "40" y = "235" id = "chargeMove2" style = "display: block;">Moonblast&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp12-12-12-12</text>
	
	<rect x="35" y="255" rx="5" ry="5" width="180" height="25" opacity = "0.7" fill="#D7CD90" id= "chargeMove3Rect" style = "display: block;"/>
	<text fill = "black" font-size = "12" font-family="Verdana" x = "40" y = "270" id = "chargeMove3" style = "display: block;">Power Gem&nbsp&nbsp&nbsp&nbsp&nbsp 12-12-12-12</text>
		
	<rect x="35" y="290" rx="5" ry="5" width="180" height="25" opacity = "0.7" fill="#D7CD90" id= "chargeMove4Rect" style = "display: block;"/>
	<text fill = "black" font-size = "12" font-family="Verdana" x = "40" y = "305" id = "chargeMove4" style = "display: block;">Power Gem&nbsp&nbsp&nbsp&nbsp&nbsp 12-12-12-12</text>
</svg>
</body>
<form id = "cardInfoForm" >
	<button id ="fontDecrease" onclick = "fontChange('-');">-</button>
	<button id ="fontIncrease" onclick = "fontChange('+');">+</button>
	
	<input id="pokemonNameInput" width = "150" placeholder="Pokemon Name" onfocusout = "updateName('pokemonNameInput','PokemonName');"></input>
	<select  id="pokemonTypeInput" width = "150" onchange = "updateColor('pokemonTypeInput','PokemonColor',true);">
		<option value="normal">Normal</option>
		<option value ="fire">Fire</option>
		<option value="water">Water</option>
		<option value="grass">Grass</option>
		<option value="flying">Flying</option>
		<option value="fighting">Fighting</option>
		<option value="poison">Poison</option>
		<option value="electric">Electric</option>
		<option value="ground">Ground</option>
		<option value="rock">Rock</option>
		<option value="psychic">Psychic</option>
		<option value="ice">Ice</option>
		<option value="bug">Bug</option>
		<option value="ghost">Ghost</option>
		<option value="steel">Steel</option>
		<option value="dragon">Dragon</option>
		<option value="dark">Dark</option>
		<option value="fairy">Fairy</option>
	</select><br>
	<input id="photo" width = "150" placeholder = "Image URL" onfocusout = "updatePhoto();"/>
	<br>
	<input id="fastMoveInput" width = "150" placeholder="Fast Move Name" onfocusout = "updateName('fastMoveInput','fastMove');"></input>
	<br>
	<button id = 'chargeMove1Btn' onclick="toggleChargeMove(['chargeMove1','chargeMove1Rect'],'chargeMove1Btn');">-</button> 
	<input id="chargeMove1Input" width = "150" placeholder="Charge Move 1" onfocusout = "updateName('chargeMove1Input', 'chargeMove1');"></input>
	<select  id="chargeMove1Type" width = "150" onchange = "updateColor('chargeMove1Type','chargeMove1Rect');">
		<option value="normal">Normal</option>
		<option value ="fire">Fire</option>
		<option value="water">Water</option>
		<option value="grass">Grass</option>
		<option value="flying">Flying</option>
		<option value="fighting">Fighting</option>
		<option value="poison">Poison</option>
		<option value="electric">Electric</option>
		<option value="ground">Ground</option>
		<option value="rock">Rock</option>
		<option value="psychic">Psychic</option>
		<option value="ice">Ice</option>
		<option value="bug">Bug</option>
		<option value="ghost">Ghost</option>
		<option value="steel">Steel</option>
		<option value="dragon">Dragon</option>
		<option value="dark">Dark</option>
		<option value="fairy">Fairy</option>
	</select><br>
	
	<button id = 'chargeMove2Btn' onclick="toggleChargeMove(['chargeMove2','chargeMove2Rect'],'chargeMove2Btn');">-</button>
	<input id="chargeMove2Input" width = "150" placeholder="Charge Move 2" onfocusout = "updateName('chargeMove2Input', 'chargeMove2');"></input>
	<select  id="chargeMove2Type" width = "150" onchange = "updateColor('chargeMove2Type','chargeMove2Rect');">
		<option value="normal">Normal</option>
		<option value ="fire">Fire</option>
		<option value="water">Water</option>
		<option value="grass">Grass</option>
		<option value="flying">Flying</option>
		<option value="fighting">Fighting</option>
		<option value="poison">Poison</option>
		<option value="electric">Electric</option>
		<option value="ground">Ground</option>
		<option value="rock">Rock</option>
		<option value="psychic">Psychic</option>
		<option value="ice">Ice</option>
		<option value="bug">Bug</option>
		<option value="ghost">Ghost</option>
		<option value="steel">Steel</option>
		<option value="dragon">Dragon</option>
		<option value="dark">Dark</option>
		<option value="fairy">Fairy</option>
	</select><br>
	
	<button id = 'chargeMove3Btn' onclick="toggleChargeMove(['chargeMove3','chargeMove3Rect'],'chargeMove3Btn');">-</button>
	<input id="chargeMove3Input" width = "150" placeholder="Charge Move 3" onfocusout = "updateName('chargeMove3Input', 'chargeMove3');"></input>
	<select  id="chargeMove3Type" width = "150" onchange = "updateColor('chargeMove3Type','chargeMove3Rect');">
		<option value="normal">Normal</option>
		<option value ="fire">Fire</option>
		<option value="water">Water</option>
		<option value="grass">Grass</option>
		<option value="flying">Flying</option>
		<option value="fighting">Fighting</option>
		<option value="poison">Poison</option>
		<option value="electric">Electric</option>
		<option value="ground">Ground</option>
		<option value="rock">Rock</option>
		<option value="psychic">Psychic</option>
		<option value="ice">Ice</option>
		<option value="bug">Bug</option>
		<option value="ghost">Ghost</option>
		<option value="steel">Steel</option>
		<option value="dragon">Dragon</option>
		<option value="dark">Dark</option>
		<option value="fairy">Fairy</option>
	</select><br>
	
	<button id = 'chargeMove4Btn' onclick="toggleChargeMove(['chargeMove4','chargeMove4Rect'],'chargeMove4Btn');">-</button>
	<input id="chargeMove4Input" width = "150" placeholder="Charge Move 4" onfocusout = "updateName('chargeMove4Input', 'chargeMove4');"></input>
	<select  id="chargeMove4Type" width = "150" onchange = "updateColor('chargeMove4Type','chargeMove4Rect');">
		<option value="normal">Normal</option>
		<option value ="fire">Fire</option>
		<option value="water">Water</option>
		<option value="grass">Grass</option>
		<option value="flying">Flying</option>
		<option value="fighting">Fighting</option>
		<option value="poison">Poison</option>
		<option value="electric">Electric</option>
		<option value="ground">Ground</option>
		<option value="rock">Rock</option>
		<option value="psychic">Psychic</option>
		<option value="ice">Ice</option>
		<option value="bug">Bug</option>
		<option value="ghost">Ghost</option>
		<option value="steel">Steel</option>
		<option value="dragon">Dragon</option>
		<option value="dark">Dark</option>
		<option value="fairy">Fairy</option>
	</select><br>
	<br>
	<button style = "width: 20%; margin: 0% 30%;" id="downloadSVG" onclick = "saveSvg();"><b>Download</b></button>
</form>
<script>
var hexColors = {
	normal: "#A3A49E",
	fire: "#FEB04B", 
	water: "#6AC7E9",
	grass: "#59C079", 
	flying: "#A7C1F2",
	fighting: "#E34448",
	poison: "#A662C7",
	electric: "#FEDF6B",
	ground: "#D2976B",
	rock: "#D7CD90",
	psychic: "#FDA194",
	ice: "#94DDD6",
	bug: "#AEC92C",
	ghost: "#A662C7",
	steel: "#5AAFB4",
	dragon: "#067FC4",
	dark: "#6E7681",
	fairy: "#F6A7E8" 
};

function saveSvg(svgEl, name) {
	svgEl = document.querySelector('svg');
	name = document.getElementById('pokemonNameInput').value;
    svgEl.setAttribute("xmlns", "http://www.w3.org/2000/svg");
    var svgData = svgEl.outerHTML;
    var preface = '<?xml version="1.0" standalone="no"?>\r\n';
    var svgBlob = new Blob([preface, svgData], {type:"image/svg+xml;charset=utf-8"});
    var svgUrl = URL.createObjectURL(svgBlob);
    var downloadLink = document.createElement("a");
    downloadLink.href = svgUrl;
    downloadLink.download = name;
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);
}

function updateName(idOfForm, idOfOutput)
{
	var newName = document.getElementById(idOfForm);
	var nameSpace = document.getElementById(idOfOutput);
	nameSpace.innerHTML = (newName.value).replaceAll(" ","&nbsp");
}
function updateColor(idOfInput,idOfObject,stroke = false)
{
	var newColor = document.getElementById(idOfInput).value;
	console.log(newColor);
	var colorObject = document.getElementById(idOfObject);
	newColor = hexColors[newColor];
	if (!stroke)
		colorObject.style.fill = newColor;
	else
		colorObject.style.stroke = newColor;
}
function fontChange(dir)
{
	item = document.getElementById('PokemonName');
	if(!item.style.fontSize)
	{
		if(dir == "+") item.style.fontSize = 19;
		else item.style.fontSize = 17;
	}
	size = parseInt((item.style.fontSize).replace('px',''));
	if(dir == "+") item.style.fontSize = size +1;
	else item.style.fontSize = size -1;
}
function toggleChargeMove(ids, btnId)
{
	btn = document.getElementById(btnId);
	for (var id in ids)
	{
		console.log(ids[id]);
		console.log(btn);
		rect = document.getElementById(ids[id]);
		console.log(rect);

		if(rect.style.display =="block")
		{
			rect.style.display = "none";
			btn.innerHTML = "+";
		}
		else
		{
			rect.style.display = "block";
			btn.innerHTML = "-";
		}
	}
}
function updatePhoto()
{
	var output = document.getElementById('photoOutput')
	output.href.baseVal = document.getElementById('photo').value;

}
document.getElementById('cardInfoForm').addEventListener('keypress', function(event) {
  if (event.keyCode === 13) {
    event.preventDefault();
	document.querySelector(':focus').blur();
  }
});
document.getElementById('cardInfoForm').addEventListener('submit', function(event) {
    event.preventDefault();
});
</script>
</html>